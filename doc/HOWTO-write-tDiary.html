<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="Author" content="TADA Tadashi">
	<link rev="MADE" href="mailto:t@tdtds.jp">
	<link rel="INDEX" href="http://www.tdiary.org/">
	<meta http-equiv="content-style-type" content="text/css">
	<link rel="stylesheet" href="doc.css" type="text/css" media="all">
	<title>HOWTO write tDiary</title>
</head>
<body>
<h1>tDiary<br><span style="font-size:medium">日記の書き方</span></h1>
<h2><a name="toc">目次</a></h2>
<ul>
	<li><a href="#basic">tDiaryの日記フォーマット</a></li>
	<li><a href="#tips">tDiary記述のコツ</a></li>
</ul>


<h2><a name="basic">tDiaryの日記フォーマット</a></h2>
<p>本文には、HTMLで日記を記述します。とは言っても、普通の文章だけの日記を書く分にはHTMLを意識しなくても良いように、HTMLに対して改行や行頭文字に特別なルールを加えたものです。サブタイトルや段落を簡単に指定するためにこのような拡張をしてあります。</p>
<p>以下のようなルールがあります。表示上の改行と実際の改行を区別するために、実際の改行には「<em style="color: #f80;">↓</em>」と書いてあります。</p>

<hr class="sep">
<p class="sample">
サブタイトル(1)<em>↓</em><br> 
上記のように行頭から始まる行は、サブタイトルとなります。標準のスタイルシートでは、太字で表示されます。サブタイトルから次の空改行までを「セクション」と呼び、サブタイトルの前にはセクションアンカーが付きます。<em>↓</em><br> 
上の行やこの行のように、サブタイトル以降の行は通常の文章として認識されます。段落がサブタイトルで始まっている場合には、文章の前にはセクションアンカーはつきません。<em>↓</em><br> 
<em>↓</em><br> 
　空改行があると、セクションの切り替えを意味します。このように、空白で文章を始めると、サブタイトル抜きでセクションが始まります。最初の段落の先頭にだけセクションアンカーが付きます。サブタイトルのある場合ように太字にはなりません。<em>↓</em><br> 
　サブタイトルで始まらなくても、2つ目の段落以降にはアンカーは付きません。<em>↓</em><br> 
<em>↓</em><br> 
&lt;pre&gt;<em>↓</em><br> 
このように行の最初が「&lt;」で始まる段落がある場合、<em>↓</em><br>
そのセクションは全体が整形の対象にならなくなります。<em>↓</em><br>
次に空改行が現れるまで(つまり次のセクションまで)の文<em>↓</em><br>
章はそのままの形でHTML内に展開されます。リストやテー<em>↓</em><br>
ブルなどを使いたい場合等、HTMLタグをそのまま使いたい<em>↓</em><br>
場面に利用できます。セクションアンカーは付きません。<em>↓</em><br> 
&lt;/pre&gt;<em>↓</em><br> 
<em>↓</em><br> 
&lt;&lt;a href=&quot;hogehoge&quot;&gt;サブタイトル(2)&lt;/a&gt;<em>↓</em><br> 
必然的に、HTMLタグで始まるサブタイトルがつけられないことになりますが、上記のように「&lt;&lt;」で始まる場合にはそれを特別にサブタイトルと見なすようになっています。<em>↓</em><br> 
</p>
<hr class="sep">

<p>上記の内容は、以下のように表示されます。</p>

<div class="sample">
<hr class="sep">
<div class="day">
<h2><a href="./?date=20010803">2001-08-03</a> <span class="title">(指定したタイトル)</span></h2>
<div class="body">
<h3 class="subtitle"><a name="p01" href="./?date=20010803#p01">■</a>サブタイトル(1)</h3>
<p>上記のように行頭から始まる行は、サブタイトルとなります。標準のスタイルシートでは、太字で表示されます。サブタイトルから次の空改行までを「セクション」と呼び、サブタイトルの前にはセクションアンカーが付きます。</p>
<p>上の行やこの行のように、サブタイトル以降の行は通常の文章として認識されます。段落がサブタイトルで始まっている場合には、文章の前にはセクションアンカーはつきません。</p>
<p><a name="p02" href="./?date=20010803#p02">■</a>　空改行があると、セクションの切り替えを意味します。このように、空白で文章を始めると、サブタイトル抜きでセクションが始まります。最初の段落の先頭にだけセクションアンカーが付きます。サブタイトルのある場合ように太字にはなりません。</p>
<p>　サブタイトルで始まらなくても、2つ目の段落以降にはアンカーは付きません。</p>
<pre>
このように最初の行が「&lt;」で始まる段落がある場合、
そのセクションは全体が整形の対象にならなくなります。
次に空改行が現れるまで(つまり次のセクションまで)の文
章はそのままの形でHTML内に展開されます。リストやテー
ブルなどを使いたい場合等、HTMLタグをそのまま使いたい
場面に利用できます。セクションアンカーは付きません。
</pre>
<h3 class="subtitle"><a name="p01" href="./?date=20010803#p04">■</a> <a href="hogehoge">サブタイトル(2)</a></h3>
<p>必然的に、HTMLタグで始まるサブタイトルがつけられないことになりますが、上記のように「&lt;&lt;」で始まる場合にはそれを特別にサブタイトルと見なすようになっています。</p>
</div>
</div>
<hr class="sep">
</div>

<p>このようにtDiaryは、簡単な文章だけからなる日記をつける場合にはHTMLを知らなくても使え、HTMLに詳しい場合にはそれもサポートするようになっています。……が、ときどき不用意にタグを使ってハマる人も少なくないので、日記中でタグを多用する人は次の「tDiary記述のコツ」もお読みください。</p>

<p><a href="#toc">▲目次へ戻る</a></p>



<h2><a name="tips">tDiary記述のコツ</a></h2>

<h3 class="subtitle">セクションにタグ入りの行を含めたい</h3>
<p>例えば日記中にリストを埋め込むために&lt;ul&gt;タグを入れたいとしましょう。話題は同じなのでセクションは変えたくない。このように段落全体を特殊なタグで装飾したい場合、tDiaryでは少しコツが必要です。以下のようなレイアウトをしたい場合を例にとりあげます。</p>

<div class="sample">
<hr class="sep">
<div class="day">
<h2><a href="./?date=20010830">2001-08-29</a> <span class="title"> </span></h2>
<div class="body">
<h3 class="subtitle"><a name="p01" href="./?date=20010829#p01">■</a>サブタイトル</h3>
<p>　以下のように2つの項目からなるリストを書きます。</p>
<ul>
	<li>リスト項目1</li>
	<li>リスト項目2</li>
</ul>
<p>　こんな感じです。ここまで同一のセクション。</p>
</div>
</div>
<hr class="sep">
</div>

<p>まずひとつの方法は、前の段落に合体させてしまう方法です。生成された日記のHTMLを見ればわかるように、段落というのは&lt;p&gt;〜&lt;/p&gt;で囲まれているだけです。これを利用してごまかしを入れます。</p>

<hr class="sep">
<p class="sample">
サブタイトル<em>↓</em><br>
　以下のように2つの項目からなるリストを書きます。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;リスト項目1&lt;/li&gt;&lt;li&gt;リスト項目2&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;　こんな感じです。ここまで同一のセクション。<em>↓</em><br>
</p>
<hr class="sep">

<p>途中でいっさい改行を入れないところがミソです。タグで囲まれた段落が何行にもわたる場合以外はこれでもけっこういけますが、ちょっと見通しが悪いですね。</p>

<p>上の例は、tDiaryが段落には自動的に&lt;p&gt;を入れることを利用しています。逆に、タグで始まる行があるセクションにはこの&lt;p&gt;タグ自体を挿入しないことを利用する方法もあります。通常の段落に、手動で&lt;p&gt;タグを入れる方法です。以下の記述例では、セクション中に「&lt;」で始まる行があるので、tDiaryは何も手を加えません。そのためリスト以外の通常の文を&lt;p&gt;〜&lt;/p&gt;で囲んでいます。</p>

<hr class="sep">
<p class="sample">
サブタイトル<em>↓</em><br>
&lt;p&gt;　以下のように2つの項目からなるリストを書きます。&lt;/p&gt;<em>↓</em><br>
&lt;ul&gt;<em>↓</em><br>
    &lt;li&gt;リスト項目1&lt;/li&gt;<em>↓</em><br>
    &lt;li&gt;リスト項目2&lt;/li&gt;<em>↓</em><br>
&lt;/ul&gt;<em>↓</em><br>
&lt;p&gt;　こんな感じです。ここまで同一のセクション。&lt;/p&gt;<em>↓</em><br>
</p>
<hr class="sep">

<p>この手法は、タグで囲まれた段落が複数行に渡るとき(例えば&lt;pre&gt;タグでソースコードを挿入するなど)には必須になるでしょう。</p>

<p>もちろん、「セクションが分かれても良い」という場合にはもっと楽になります。こだわりがなければ以下のように書いてしまうのが良いかもしれません。</p>

<hr class="sep">
<p class="sample">
サブタイトル<em>↓</em><br>
　以下のように2つの項目からなるリストを書きます。<em>↓</em><br>
<em>↓</em><br>
&lt;ul&gt;<em>↓</em><br>
    &lt;li&gt;リスト項目1&lt;/li&gt;<em>↓</em><br>
    &lt;li&gt;リスト項目2&lt;/li&gt;<em>↓</em><br>
&lt;/ul&gt;<em>↓</em><br>
<em>↓</em><br>
　こんな感じです。ここまで同一のセクション。<em>↓</em><br>
</p>
<hr class="sep">

<p>最後の「こんな感じです〜」の行頭にはセクションアンカーが入ってしまいますが、たいして気にする問題でもないでしょう。</p>

<h3 class="subtitle">セクション単位でなく、段落単位にアンカーを入れたい</h3>
<p>tDiaryは、「話題の単位はセクションにあり、段落にまでアンカーを入れる必要はない」というポリシーで作られているため、基本的には段落にアンカーを入れることはできません。ただし、サブタイトルなしのセクションが作れることを利用すれば、見た目は段落単位にアンカーを入れることもできます。以下の例を見てください:</p>

<hr class="sep">
<p class="sample">
サブタイトル(1)<em>↓</em><br> 
<em>↓</em><br> 
　このようにサブタイトルの下にすぐ空改行を入れてしまい、続く段落を空白で始めるようにすれば、サブタイトルと段落は別々のセクションになります。<em>↓</em><br> 
<em>↓</em><br> 
　段落の間にすべて空改行を入れるようにすれば、このようにすべての段落にアンカーを付けることができるわけです。<em>↓</em><br> 
<em>↓</em><br> 
サブタイトル(2)<em>↓</em><br> 
<em>↓</em><br> 
　行頭の空白を入れないとサブタイトルになるので注意しましょう。<em>↓</em><br> 
</p>
<hr class="sep">

<p>上の例は以下のように展開されます。ポイントは<strong>行頭の空白</strong>ですね。</p>

<div class="sample">
<hr class="sep">
<div class="day">
<h2><a href="./?date=20010830">2001-08-30</a> <span class="title"></span></h2>
<div class="body">
<h3 class="subtitle"><a name="p01" href="./?date=20010830#p01">■</a>サブタイトル(1)</h3>
<p><a name="p02" href="./?date=20010830#p02">■</a>このようにサブタイトルの下にすぐ空改行を入れてしまい、続く段落を空白で始めるようにすれば、サブタイトルと段落は別々のセクションになります。</p>
<p><a name="p03" href="./?date=20010830#p03">■</a>段落の間にすべて空改行を入れるようにすれば、このようにすべての段落にアンカーを付けることができるわけです。</p>
<h3 class="subtitle"><a name="p04" href="./?date=20010830#p04">■</a>サブタイトル(2)</h3>
<p><a name="p04" href="./?date=20010830#p04">■</a>行頭の空白を入れないとサブタイトルになるので注意しましょう。</p>
</div>
</div>
<hr class="sep">
</div>

<p><a href="#toc">▲目次へ戻る</a></p>
</body>
</html>

